// stimulus-inline-input-validations@1.2.0 downloaded from https://ga.jspm.io/npm:stimulus-inline-input-validations@1.2.0/dist/stimulus-inline-input-validations.module.js

import{Controller as e}from"@hotwired/stimulus";var a=Object.defineProperty;var p=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var u=(e,a,t)=>(p(e,typeof a!="symbol"?a+"":a,t),t);var t={numericality:/^[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,singleNumber:/[0-9]/,singleCapitalLetter:/[A-Z]/,singleSpecialCharacter:/[!@#$%^&*]/,singleQuotes:/'/},s=t;var r={locales:{en:{presence:"Can't be blank",length:{min:"Too short. Minimum {value} characters",max:"Too long. Maximum {value} characters"},numericality:"Must be a number",email:"Invalid email format",strongPassword:{capitalLetter:"Must contain at least one capital letter (A-Z)",number:"Must contain at least one number",specialCharacter:"Must contain at least one special character (!@#$%^&*)",length:"Must be at least 10 characters long"}},es:{presence:"no puede estar en blanco",length:{min:"Demasiado corto. Mínimo {value} caracteres",max:"Demasiado largo. Máximo {value} caracteres"},numericality:"Tiene que ser un número",email:"Formato de correo inválido",strongPassword:{capitalLetter:"Debe contener al menos una letra mayúscula (A-Z)",number:"Debe contener al menos un número",specialCharacter:"Debe contener al menos un carácter especial (!@#$%^&*)",length:"Debe tener al menos 10 caracteres"}},fr:{presence:"Je ne peux pas être vide",length:{min:"Trop court. Minimum {value} caractères",max:"Trop long. {value} caractères maximum"},numericality:"Doit être un nombre",email:"Format d'email invalide",strongPassword:{capitalLetter:"Doit contenir au moins une lettre majuscule (A-Z)",number:"Doit contenir au moins un chiffre",specialCharacter:"Doit contenir au moins un caractère spécial (!@#$%^&*)",length:"Doit contenir au moins 10 caractères"}},"pt-BR":{presence:"Não posso ficar em branco",length:{min:"Muito curto. Mínimo {value} caracteres",max:"Demasiado longo. Máximo de {value} caracteres"},numericality:"Deve ser um número",email:"Formato de email inválido",strongPassword:{capitalLetter:"Deve conter pelo menos uma letra maiúscula (A-Z)",number:"Deve conter pelo menos um número",specialCharacter:"Deve conter pelo menos um caractere especial (!@#$%^&*)",length:"Deve ter pelo menos 10 caracteres"}},"zh-CN":{presence:"不能为空",length:{min:"过短。最少 {value} 个字符",max:"太长。最多 {value} 个字符"},numericality:"必须是一个数字",email:"电子邮件格式无效",strongPassword:{capitalLetter:"必须包含至少一个大写字母 (A-Z)",number:"必须至少包含一个数字",specialCharacter:"必须至少包含一个特殊字符 (!@#$%^&*)",length:"长度必须至少 10 个字符"}},"zh-TW":{presence:"不能為空",length:{min:"過短。最少 {value} 個字符",max:"太長。最多 {value} 個字符"},numericality:"必須是一個數字",email:"電子郵件格式無效",strongPassword:{capitalLetter:"必須包含至少一個大寫字母 (A-Z)",number:"必須至少包含一個數字",specialCharacter:"必須至少包含一個特殊字元 (!@#$%^&*)",length:"長度必須至少 10 個字符"}}}},l=r;var i={presence(e,a,t){e.trim().length===0&&a.push({type:"presence",message:l.locales[t].presence})},length(e,a,t,s){e.length<a.min&&t.push({type:"length-min",message:l.locales[s].length.min.replace(/{value}/g,a.min)}),e.length>a.max&&t.push({type:"length-max",message:l.locales[s].length.max.replace(/{value}/g,a.max)})},numericality(e,a,t){s.numericality.test(e)||a.push({type:"numericality",message:l.locales[t].numericality})},email(e,a,t){s.email.test(e)||a.push({type:"email",message:l.locales[t].email})},strongPassword(e,a,t,r){s.singleCapitalLetter.test(a)||t.push({type:"strong-password-capital-letter",message:l.locales[r].strongPassword.capitalLetter}),s.singleNumber.test(a)||t.push({type:"strong-password-number",message:l.locales[r].strongPassword.number}),s.singleSpecialCharacter.test(a)||t.push({type:"strong-password-special-character",message:l.locales[r].strongPassword.specialCharacter}),!(e.length&&e.some((e=>Object.keys(e).includes("length"))))&&a.length<10&&t.push({type:"strong-password-length",message:l.locales[r].strongPassword.length})}},n=i;var o=["en","es","fr","pt-BR","zh-CN","zh-TW"],c=o;var m=class extends e{connect(){this.handlei18n(),this.fieldTargets.forEach((e=>{e.setAttribute("data-action","input->input-validator#validateInput"),e.addEventListener("blur",(e=>{this.validateInput(e)}))}))}handlei18n(){let e=this.element.getAttribute("data-input-validator-i18n-locale")||"en";c.includes(e)?this.locale=e:(console.warn(`Stimulus Inline Input Validations: Unsupported i18n locale '${e}'. Supported data-input-validator-i18n-locale values are: ${c.join(", ")}. Using default language 'en'`),this.locale="en")}handleJSONValidations(e,a,t){a.forEach((s=>{let[r]=Object.keys(s);switch(r){case"presence":s.presence&&n.presence(e,t,this.locale);break;case"length":s.length.min&&s.length.max?n.length(e,s.length,t,this.locale):console.log("Couldn't validate length (missing keys min or max)");break;case"numericality":s.numericality&&n.numericality(e,t,this.locale);break;case"email":s.email&&n.email(e,t,this.locale);break;case"strong_password":s.strong_password&&n.strongPassword(a,e,t,this.locale);break;default:break}}))}handleValidations(e,a,t){if(e.hasAttribute("data-validates-presence")&&e.getAttribute("data-validates-presence")!=="false"&&n.presence(a,t,this.locale),e.hasAttribute("data-validates-length")&&e.getAttribute("data-validates-length").length>2){let[s,r]=e.getAttribute("data-validates-length").split(",").map(Number);n.length(a,{min:s,max:r},t,this.locale)}e.hasAttribute("data-validates-numericality")&&e.getAttribute("data-validates-numericality")!=="false"&&n.numericality(a,t,this.locale),e.hasAttribute("data-validates-email")&&e.getAttribute("data-validates-email")!=="false"&&n.email(a,t,this.locale),e.hasAttribute("data-validates-strong-password")&&e.getAttribute("data-validates-strong-password")!=="false"&&n.strongPassword([],a,t,this.locale)}errorElement(e,a){let t,s="font-size: 14px; color: red";return e.hasAttribute("data-errors-styles-css")&&(s=e.getAttribute("data-errors-styles-css")),e.hasAttribute("data-errors-styles-class")&&(s=null,t=e.getAttribute("data-errors-styles-class")),`<div error="${a.type}" ${s?"style='"+s+"'":""} ${t?"class='"+t+"'":""} >${a.message}</div>`}validateInput({target:e,target:{value:a}}){let t=[],r=e.getAttribute("data-field");if(!r){console.log('one or more <input> elements are the missing data-field="" attribute.');return}let[l]=this.errorsTargets.filter((e=>e.getAttribute("data-field")===r));if(e.hasAttribute("data-validations"))try{let r=e.getAttribute("data-validations");s.singleQuotes.test(r)&&(r=r.replace(/'/g,'"')),this.handleJSONValidations(a,JSON.parse(r),t)}catch(e){console.log(e),console.log(`Error parsing JSON string on the data-validations attribute on data-field="${r}". Is the json string formatted properly?`);return}else this.handleValidations(e,a,t);l.innerHTML="",t.length?t.forEach((e=>{l.innerHTML+=this.errorElement(l,e),l.style.visibility="visible"})):l.style.visibility="invisible"}};u(m,"targets",["field","errors"]);export{m as InputValidator};

